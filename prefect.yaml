# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: land_pipeline
prefect-version: 3.4.24

# build section allows you to manage and build docker images
build: null

# push section allows you to manage if and how this project is uploaded to remote locations
push: null

# pull section allows you to provide instructions for cloning this project in remote locations
pull:
  - prefect.deployments.steps.git_clone:
      repository: "https://github.com/KeoshaYoung/land_pipeline.git"
      branch: "main"
  - prefect.deployments.steps.set_working_directory:
      directory: "land_pipeline"

# the deployments section allows you to provide configuration for deploying flows
deployments:
  - name: nightly_ingest
    version: null
    tags:
      - land
      - biz
      - prod
    concurrency_limit: null
    description: null
    entrypoint: flow_leads.py:lead_ingest
    parameters: {}
    work_pool:
      name: land-pool
      work_queue_name: null
      job_variables: {}
    schedules:
      - cron: 0 2 * * *
        timezone: null
        day_or: true

  - name: nightly_backup
    entrypoint: nightly_backup.py:nightly_backup
    tags: [backup, prod]
    work_pool:
      name: land-pool
    schedules:
      - cron: "5 2 * * *" # run 5 minutes after ingest
        timezone: "America/New_York"
        day_or: true
    parameters:
      make_webhook_url: "https://hook.us2.make.com/t9gtkgg5idvtw10tf767d9u957v71dah"
      tables: []
      subfolder: ""
